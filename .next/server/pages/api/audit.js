"use strict";(()=>{var t={};t.id=421,t.ids=[421],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9648:t=>{t.exports=import("axios")},295:t=>{t.exports=import("cheerio")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,a){return a in e?e[a]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,a)):"function"==typeof e&&"default"===a?e:void 0}}})},9286:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.r(e),a.d(e,{config:()=>d,default:()=>c,routeModule:()=>l});var o=a(1802),r=a(7153),i=a(6249),s=a(9),u=t([s]);s=(u.then?(await u)():u)[0];let c=(0,i.l)(s,"default"),d=(0,i.l)(s,"config"),l=new o.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/audit",pathname:"/api/audit",bundlePath:"",filename:""},userland:s});n()}catch(t){n(t)}})},9:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.r(e),a.d(e,{default:()=>s});var o=a(9648),r=a(295),i=t([o,r]);async function s(t,e){if("POST"!==t.method)return e.status(405).json({error:"Method not allowed"});let{url:a}=t.body;if(!a)return e.status(400).json({error:"URL is required"});try{let t=(await o.default.get(a,{headers:{"User-Agent":"Mozilla/5.0 (compatible; SEO-Audit-Bot/1.0)"},timeout:15e3,maxRedirects:5})).data,n=r.load(t),i=function(t){let e=t("title").text().trim(),a=t('meta[name="description"]').attr("content")||"",n=t('link[rel="canonical"]').attr("href")||"";return{title:{value:e,length:e.length,status:e.length>=30&&e.length<=60?"good":"warning",recommendation:e.length<30?"Tytuł jest za kr\xf3tki (min 30 znak\xf3w)":e.length>60?"Tytuł jest za długi (max 60 znak\xf3w)":"Długość tytułu jest optymalna"},description:{value:a,length:a.length,status:a.length>=120&&a.length<=160?"good":"warning",recommendation:a.length<120?"Description jest za kr\xf3tki (min 120 znak\xf3w)":a.length>160?"Description jest za długi (max 160 znak\xf3w)":"Długość description jest optymalna"},canonical:n}}(n),s=function(t){let e={h1:{count:0,values:[]},h2:{count:0,values:[]},h3:{count:0,values:[]},h4:{count:0,values:[]},h5:{count:0,values:[]},h6:{count:0,values:[]}};return["h1","h2","h3","h4","h5","h6"].forEach(a=>{t(a).each((n,o)=>{let r=t(o).text().trim();r&&(e[a].count++,e[a].values.push(r))})}),e}(n),u=function(t){let e=[],a=!1;return t('script[type="application/ld+json"]').each((n,o)=>{let r=t(o).html();if(r)try{let t=JSON.parse(r),n={type:t["@type"]||(Array.isArray(t)?t[0]["@type"]:"Unknown"),valid:!0,errors:[],data:t};t["@context"]||(n.valid=!1,n.errors.push("Brak @context")),t["@type"]||(n.valid=!1,n.errors.push("Brak @type")),e.push(n),a=!0}catch(t){e.push({type:"Invalid",valid:!1,errors:["Nieprawidłowy format JSON"],data:r})}}),{found:a,count:e.length,schemas:e}}(n),c=function(t,e){let a=!1,n=0,o=[];return e.schemas.forEach(t=>{"FAQPage"===t.type&&t.data.mainEntity&&(a=!0,t.data.mainEntity.forEach(t=>{"Question"===t["@type"]&&(n++,o.push({question:t.name||"",answer:t.acceptedAnswer?.text||""}))}))}),a||[".faq","#faq",'[class*="faq"]','[id*="faq"]','section:has(h2:contains("FAQ"))','section:has(h2:contains("Pytania"))'].forEach(e=>{t(e).find('dt, .question, [class*="question"]').each((e,r)=>{let i=t(r).text().trim(),s=t(r).next().text().trim();i&&s&&(a=!0,n++,o.push({question:i,answer:s}))})}),{found:a,count:n,items:o}}(n,u),d={openGraph:{found:n('meta[property^="og:"]').length>0,title:n('meta[property="og:title"]').attr("content")||"",description:n('meta[property="og:description"]').attr("content")||"",image:n('meta[property="og:image"]').attr("content")||"",url:n('meta[property="og:url"]').attr("content")||""},twitter:{found:n('meta[name^="twitter:"]').length>0,card:n('meta[name="twitter:card"]').attr("content")||"",title:n('meta[name="twitter:title"]').attr("content")||"",description:n('meta[name="twitter:description"]').attr("content")||"",image:n('meta[name="twitter:image"]').attr("content")||""}},l=function(t){let e,a=0;if(e=30,"good"===t.metaTags.title.status?a+=15:t.metaTags.title.value&&(a+=8),"good"===t.metaTags.description.status?a+=15:t.metaTags.description.value&&(a+=8),e+=20,1===t.headings.h1.count?a+=10:t.headings.h1.count>0&&(a+=5),t.headings.h2.count>0&&(a+=10),e+=25,t.jsonLd.found){a+=15;let e=t.jsonLd.schemas.filter(t=>t.valid).length;a+=Math.min(10,5*e)}return e+=10,t.faq.found&&(a+=10),e+=15,t.socialTags.openGraph.found&&(a+=8),t.socialTags.twitter.found&&(a+=7),Math.round(a/e*100)}({metaTags:i,headings:s,jsonLd:u,faq:c,socialTags:d}),h=function(t){let e=[];if("good"!==t.metaTags.title.status&&e.push(`Popraw tytuł strony: ${t.metaTags.title.recommendation}`),"good"!==t.metaTags.description.status&&e.push(`Popraw meta description: ${t.metaTags.description.recommendation}`),0===t.headings.h1.count?e.push("Dodaj nagł\xf3wek H1 na stronie"):t.headings.h1.count>1&&e.push("Użyj tylko jednego nagł\xf3wka H1 na stronie (obecnie: "+t.headings.h1.count+")"),t.jsonLd.found){let a=t.jsonLd.schemas.filter(t=>!t.valid);a.length>0&&e.push("Napraw błędy w strukturach JSON-LD - znaleziono "+a.length+" nieprawidłowych")}else e.push("Dodaj struktury JSON-LD (Schema.org) aby poprawić widoczność w wyszukiwarkach i AI");return t.faq.found||e.push("Dodaj sekcję FAQ ze schema markup FAQPage aby zwiększyć widoczność w Google i chatach AI"),t.socialTags.openGraph.found||e.push("Dodaj tagi Open Graph dla lepszego wyświetlania w mediach społecznościowych"),t.socialTags.twitter.found||e.push("Dodaj Twitter Card meta tagi"),t.metaTags.canonical||e.push("Dodaj canonical URL aby uniknąć problem\xf3w z duplikacją treści"),0===e.length&&e.push("Świetna robota! Twoja strona jest dobrze zoptymalizowana. Rozważ regularne audyty aby utrzymać wysoki standard."),e}({metaTags:i,headings:s,jsonLd:u,faq:c,socialTags:d});e.status(200).json({url:a,overallScore:l,metaTags:i,headings:s,jsonLd:u,faq:c,socialTags:d,recommendations:h})}catch(t){console.error("Audit error:",t),e.status(500).json({error:"Nie udało się przeanalizować strony. Sprawdź, czy URL jest poprawny i dostępny."})}}[o,r]=i.then?(await i)():i,n()}catch(t){n(t)}})},7153:(t,e)=>{var a;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return a}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(t,e,a)=>{t.exports=a(145)}};var e=require("../../webpack-api-runtime.js");e.C(t);var a=e(e.s=9286);module.exports=a})();